# 绩效核算系统 - 接下来的工作

> **说明**：记录待完成的任务和开发计划

---

## 紧急待办（下次优先处理）

### 1. 修复绩效计算明细问题
- **问题**：切换员工后界面消失
- **文件**：`app/pages/calculate_page.py`
- **需要**：排查 expander 逻辑，确保每个员工都能正常展开显示

---

## 短期任务

### 1. 完善阶梯规则配置
- 目前阶梯规则是示例数据
- 需要人事提供实际的阶梯规则数值
- 涉及文件：`data/regions.json`

### 2. 给员工批量分配技能
- 目前 `employee_skills.json` 为空
- 需要给19个员工分配技能并设置考核状态
- 涉及页面：员工技能指派

### 3. 测试完整的绩效计算流程
- 导入12月绩效数据
- 执行计算
- 验证结果是否正确

### 4. 与历史数据对比验证
- 拿之前人工计算的结果做对比
- 找出差异并修正逻辑

---

## 中期任务

### 1. 优化导出Excel格式
- 调整列宽、格式
- 添加汇总行

### 2. 添加数据校验
- 导入时检查数据完整性
- 计算前检查员工技能配置

### 3. 优化用户体验
- 添加操作提示
- 优化页面布局

---

## 长期任务

### 1. 接入PostgreSQL数据库
- 确认服务器数据库类型
- 设计数据迁移方案
- 实现数据库存储

### 2. 部署到Mac Mini服务器
- 配置服务器环境
- 部署应用
- 接入公司内网系统

### 3. 添加用户权限管理
- 与公司内网系统对接
- 实现权限控制

---

## 待确认/待提供事项

| 事项 | 说明 | 状态 |
|-----|------|------|
| 实际的阶梯规则数值 | 每个大区域的区间和奖金 | 待人事提供 |
| 员工技能分配表 | 哪个员工有哪些技能 | 待人事提供 |
| 历史计算结果 | 用于验证系统计算正确性 | 待提供 |
| 服务器数据库类型 | PostgreSQL确认 | 待确认 |

---

## 已完成的里程碑

- [x] 第一阶段：基础数据管理
  - [x] 项目目录结构
  - [x] 数据存储（JSON格式）
  - [x] 员工管理页面
  - [x] 大区域管理页面（含阶梯规则配置）
  - [x] 小技能管理页面（含工资设置、批量编辑）
  - [x] 员工-技能指派页面（含考核状态）

- [x] 第二阶段：核算引擎（基本完成）
  - [x] 绩效分导入（解析ERP Excel）
  - [x] 在岗判断逻辑
  - [x] 阶梯计算逻辑
  - [x] 汇总计算
  - [x] 结果导出Excel
  - [ ] 人工验证（进行中）

- [ ] 第三阶段：历史记录
  - [x] 历史数据存储
  - [x] 历史查询页面
  - [ ] 月度对比功能完善

- [ ] 第四阶段：生产部署
  - [ ] 接入PostgreSQL
  - [ ] 部署到Mac Mini

---

*最后更新：2024年12月29日*
